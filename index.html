<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>å¤ªæ¸…è§€ç™¾è¬å°å­¸å ‚</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app">

    <div id="startScreen">
      <div class="cover-wrap">
        <img src="cover.jpg" class="cover" alt="ç™¾è¬å°å­¸å ‚">

<div class="name-wrap">
          <input id="nameInput" class="name-input" placeholder="è¼¸å…¥æš±ç¨±ï¼ˆä¾‹ï¼šå°æ˜ï¼‰" />
          <div id="nameHint" class="name-hint"></div>
        </div>

        <button id="startBtn" class="start-on-cover">é–‹å§‹æŒ‘æˆ°</button>
      </div>
    </div>

    <div id="gameScreen" style="display:none;">
      <div class="card">
        <p id="question"></p>
        <div id="choices"></div>
        <p id="result"></p>
        <p id="score"></p>
      </div>
    </div>

<div id="rankScreen" style="display:none;">
      <div class="card">
        <h2>ğŸ† æ’è¡Œæ¦œ</h2>
        <ol id="rankList"></ol>
        <button id="restartBtn">å†ç©ä¸€æ¬¡</button>
      </div>
    </div>

  </div>


  <script>
  // â‘  é¡Œåº«
  const questions = [
    {
      question: "ä¿®è¡Œä¸­å¸¸èªªçš„ã€Œæ”¾ä¸‹ã€ï¼Œæ¯”è¼ƒæ¥è¿‘å“ªä¸€ç¨®ç‹€æ…‹ï¼Ÿ",
      choices: ["ä»€éº¼éƒ½ä¸åœ¨ä¹", "ä¸å†è¢«åŸ·è‘—ç‰½è‘—èµ°", "é€ƒé¿ç¾å¯¦ç”Ÿæ´»", "æ–·çµ•æ‰€æœ‰é—œä¿‚"],
      answer: 1
    },
    {
      question: "ä½›æ•™æ‰€èªªçš„ã€Œè¦ºã€ï¼Œæœ€æ¥è¿‘ä¸‹åˆ—å“ªå€‹æ„æ€ï¼Ÿ",
      choices: ["ç²å¾—ç‰¹æ®Šèƒ½åŠ›", "å°ä¸–ç•ŒçœŸç›¸çš„æ¸…æ¥šçœ‹è¦‹", "æƒ…ç·’æ°¸é å¹³éœ", "çŸ¥é“å¾ˆå¤šç¶“æ–‡"],
      answer: 1
    },
    {
      question: "é“æ•™ä¿®è¡Œä¸­å¼·èª¿ã€Œé †å…¶è‡ªç„¶ã€ï¼Œä¸¦ä¸æ˜¯æŒ‡ä»€éº¼ï¼Ÿ",
      choices: ["å°Šé‡äº‹æƒ…æœ¬ä¾†çš„ç¯€å¥", "ä¸å¼·æ±‚ã€ä¸é€†å‹¢", "ä»€éº¼éƒ½ä¸åš", "èˆ‡è¬ç‰©å’Œè«§å…±è™•"],
      answer: 2
    },
    {
      question: "ä¿®è¡Œä¸­é‡åˆ°ç…©æƒ±æ™‚ï¼Œä¸‹åˆ—å“ªä¸€ç¨®æ…‹åº¦æœ€æ¥è¿‘æ­£ç¢ºæ–¹å‘ï¼Ÿ",
      choices: ["å£“æŠ‘æƒ…ç·’ä¸è¦æƒ³", "æ€ªè‡ªå·±ä¿®å¾—ä¸å¤ å¥½", "è§€å¯Ÿå®ƒã€ç†è§£å®ƒçš„ä¾†æº", "é¦¬ä¸Šç”¨å…¶ä»–äº‹è½‰ç§»æ³¨æ„"],
      answer: 2
    },
    {
      question: "ä½›æ•™ä¸­æ‰€èªªçš„ã€Œç„¡å¸¸ã€ï¼ŒçœŸæ­£æé†’ä¿®è¡Œäººçš„æ˜¯ä»€éº¼ï¼Ÿ",
      choices: ["äººç”Ÿæ˜¯ç—›è‹¦çš„", "ä¸€åˆ‡éƒ½æ²’æœ‰åƒ¹å€¼", "ä¸è¦åŸ·è‘—æ–¼å¿…ç„¶ä¸è®Š", "ä¸–ç•Œæ˜¯è™›å‡çš„"],
      answer: 2
    },
    {
      question: "é“æ•™ä¿®è¡Œä¸­é‡è¦–ã€Œæ¸…éœã€ï¼Œæ¯”è¼ƒæ¥è¿‘ä¸‹åˆ—å“ªä¸€ç¨®ç‹€æ…‹ï¼Ÿ",
      choices: ["é›¢ç¾¤ç´¢å±…", "å¤–åœ¨å®Œå…¨å®‰éœ", "å…§å¿ƒå°‘æ¬²ã€ä¸è¢«æ‹‰æ‰¯", "æ¯å¤©å›ºå®šæ‰“å"],
      answer: 2
    },
    {
      question: "çœŸæ­£çš„ä¿®è¡Œï¼Œæœ€å¯èƒ½ç™¼ç”Ÿåœ¨å“ªå€‹æ™‚åˆ»ï¼Ÿ",
      choices: ["æ‰“åæˆ–èª¦ç¶“æ™‚", "åœ¨å±±ä¸­é–‰é—œæ™‚", "ç”Ÿæ´»ä¸­èµ·ç…©æƒ±çš„ç•¶ä¸‹", "å®Œæˆå„€å¼ä¹‹å¾Œ"],
      answer: 2
    },
    {
      question: "ä½›æ•™èˆ‡é“æ•™åœ¨ä¿®è¡Œä¸Šï¼Œæœ€é‡è¦çš„å…±åŒé»æ˜¯ä»€éº¼ï¼Ÿ",
      choices: ["è¿½æ±‚ç¥é€šæ„Ÿæ‡‰", "é‡è¦–å¤–åœ¨å½¢å¼", "å›åˆ°å°å…§å¿ƒçš„è§€ç…§", "ä¾è³´å®—æ•™å¸«æŒ‡å¼•"],
      answer: 2
    },
    {
      question: "ä¿®è¡Œè·¯ä¸Šï¼Œå“ªä¸€ç¨®ç‹€æ…‹æœ€å®¹æ˜“è®“äººåœæ»¯ä¸å‰ï¼Ÿ",
      choices: ["å¶çˆ¾æ‡·ç–‘è‡ªå·±", "æ„Ÿåˆ°å›°æƒ‘èˆ‡è¿·æƒ˜", "è‡ªä»¥ç‚ºå·²ç¶“æ‡‚äº†", "ä¿®è¡Œé€²å±•ç·©æ…¢"],
      answer: 2
    },
    {
      question: "ä¿®è¡Œçš„æˆæœï¼Œæœ€å¯èƒ½å¾å“ªè£¡è¢«çœ‹è¦‹ï¼Ÿ",
      choices: ["è¨€èªè®Šå¾—é«˜æ·±", "æƒ…ç·’èµ·ä¼è®Šå°‘ã€è¦ºå¯Ÿè®Šå¿«", "ç”Ÿæ´»è®Šå¾—é †åˆ©", "ä»–äººå°ä½ çš„è©•åƒ¹"],
      answer: 1
    }
  ];

  let current = 0;
  let score = Number(localStorage.getItem("score") ?? 0);

  // â‘¡ æŠ“ç•«é¢å…ƒç´ ï¼ˆå…¨éƒ¨æ”¾ä¸€èµ·ï¼Œé¿å… undefinedï¼‰
  const startBtn    = document.getElementById("startBtn");
  const startScreen = document.getElementById("startScreen");
  const gameScreen  = document.getElementById("gameScreen");

  const questionEl = document.getElementById("question");
  const choicesEl  = document.getElementById("choices");
  const resultEl   = document.getElementById("result");
  const scoreEl    = document.getElementById("score");

  const rankScreen = document.getElementById("rankScreen");
  const rankList   = document.getElementById("rankList");
  const restartBtn = document.getElementById("restartBtn");

  // âœ… cardEl å…ˆå®£å‘Šï¼ŒæŒ‰é–‹å§‹å¾Œå†æŠ“
  let cardEl = null;

  // â‘¢ æ’è¡Œæ¦œ
  function saveToRank(name, score) {
    const key = "quiz_rank";
    const data = JSON.parse(localStorage.getItem(key) || "[]");

    data.push({ name, score, time: Date.now() });
    data.sort((a, b) => b.score - a.score);

    localStorage.setItem(key, JSON.stringify(data.slice(0, 10)));
  }

  function showRank() {
    const data = JSON.parse(localStorage.getItem("quiz_rank") || "[]");
    rankList.innerHTML = "";

    if (data.length === 0) {
      rankList.innerHTML = "<li>ç›®å‰é‚„æ²’æœ‰ç´€éŒ„</li>";
      return;
    }

    data.forEach((item, i) => {
      const li = document.createElement("li");
      li.textContent = `${i + 1}. ${item.name} â€” ${item.score} åˆ†`;
      rankList.appendChild(li);
    });
  }

  restartBtn.addEventListener("click", () => {
    current = 0;
    score = 0;
    localStorage.setItem("score", 0);

    rankScreen.style.display = "none";
    startScreen.style.display = "block";
  });

  // â‘£ å‡ºé¡Œï¼ˆâœ… ä½ åŸæœ¬å°‘æ‰çš„å°±æ˜¯é€™æ•´æ®µã€Œæ­£å¸¸å‡ºé¡Œã€ï¼‰
  function showQuestion() {
    const q = questions[current];

    // é¡Œç›®çµæŸ â†’ æ’è¡Œæ¦œ
    if (!q) {
      const name = localStorage.getItem("player_name") || "åŒ¿å";
      saveToRank(name, score);

      gameScreen.style.display = "none";
      rankScreen.style.display = "block";
      showRank();
      return;
    }

    // æ­£å¸¸å‡ºé¡Œ
    questionEl.textContent = q.question;
    choicesEl.innerHTML = "";
    resultEl.textContent = "";
    resultEl.className = "";
    scoreEl.textContent = `ç›®å‰åˆ†æ•¸ï¼š${score}`;

    q.choices.forEach((text, i) => {
      const btn = document.createElement("button");
      btn.textContent = text;
      btn.onclick = () => answer(i);
      choicesEl.appendChild(btn);
    });
  }

  // â‘¤ ä½œç­”
  function answer(i) {
    const q = questions[current];

    if (i === q.answer) {
      resultEl.textContent = "âœ… ç­”å°äº†ï¼";
      resultEl.className = "ok";

      // é‡‘è‰²é–ƒå…‰
      if (cardEl) {
        cardEl.classList.remove("flash-gold");
        void cardEl.offsetWidth;
        cardEl.classList.add("flash-gold");
      }

      score++;
      localStorage.setItem("score", score);
    } else {
      resultEl.textContent = "âŒ ç­”éŒ¯äº†";
      resultEl.className = "bad";
    }

    current++;
    setTimeout(showQuestion, 300);
  }

  // â‘¥ é–‹å§‹
  startBtn.addEventListener("click", () => {
    startScreen.style.display = "none";
    rankScreen.style.display = "none";
    gameScreen.style.display = "block";

    // âœ… ä¸€å®šæŠ“åˆ°é¡Œç›®é‚£å¼µ cardï¼ˆé¿å…æŠ“åˆ°æ’è¡Œæ¦œçš„ cardï¼‰
    cardEl = gameScreen.querySelector(".card");

    // é‡æ–°é–‹å§‹ä¸€å ´ï¼ˆå¯é¸ï¼šä½ è¦ç´¯ç©åˆ†æ•¸å°±æŠŠé€™å…©è¡Œæ‹¿æ‰ï¼‰
    current = 0;
    score = 0;
    localStorage.setItem("score", score);

    showQuestion();
  });
</script>

</body>
</html>
